seed: 42

data:
  csv_path: "data/raw/diabetes_cleaned.csv"
  target: "Outcome"
  test_size: 0.2
  actionable_features: ["Glucose", "BMI", "Insulin", "BloodPressure"]

model:
  hidden_layers: [32, 16]
  lr: 0.005
  epochs: 100
  batch_size: 32

xai:
  shap_background_samples: 100
  dice_method: "gradient" #  "random"/"genetic"
  dice_total_cfs: 1
  dice_desired_class: 0
  shap_relevance_threshold: 0.01
  monotonicity: {}

# [technicality, verbosity, depth, perspective]
personas:
  patient: [0.2, 0.8, 0.8, 0.5] # Simple, Action-oriented
  clinician: [0.8, 0.2, 0.8, 0.2] # High Tech, Cause-oriented
  balanced: [0.5, 0.5, 0.5, 0.5] # Balanced analysis
  test: [0.8, 0.2, 0.2, 0.8] # Test style

cpm:
  learning_rate: 0.2

verifier:
  tolerances:
    default: 0.5
    impact: 0.005
    alignment: 0.3
  alias_map:
    BLOODPRESSURE: ["BP", "BLOOD_PRESSURE", "PRESSIONE", "B_P"]
    DIABETESPEDIGREEFUNCTION: ["DPF", "PEDIGREE", "GENETICS", "FAMILY_HISTORY"]
    GLUCOSE: ["GLU", "GLICEMIA", "ZUCCHERO"]
    PREGNANCIES: ["PREG", "GRAVIDANZE"]

  llm_judge_model: "gpt-oss:20b-cloud"

  verifier_rubric:
    technicality:
      levels:
        0.2: "Accessible: Uses plain language to explain financial concepts. DO NOT use ANY numbers. Must communicate direction of changes with verbs (e.g., increases, decreases). Focus is on simple approval chances, avoiding complex banking jargon. SHAP values not mentioned."
        0.5: "Balanced: Uses specific measurements and some technical terms, but avoids heavy statistical breakdowns. SHAP values should not be mentioned in the narrative."
        0.8: "Technical: Professional clinical report style. Uses exact values, specific medical/statistical terminology, and discusses precise statistical impacts (SHAP values should be mentioned in the narrative)."
    verbosity:
      levels:
        0.2: "Telegraphic: Strictly uses bullet points. Very concise, short sentences, zero conversational filler."
        0.5: "Standard: Concise paragraphs or mixed formatting. Clear and direct."
        0.8: "Narrative: High fluency. Strictly NO bullet points. Continuous prose using transition words (e.g., 'Furthermore', 'Consequently')."
    depth:
      levels:
        0.2: "Surface: Analyzes features in isolation (one-by-one). Focuses on individual impacts without linking them together."
        0.5: "Intermediate: Acknowledges that multiple features contribute to the outcome but lacks detailed interaction analysis."
        0.8: "Systemic: Deep analysis of interactions. Explains how features work together (e.g., 'Feature A amplifies the risk of Feature B') to drive the prediction."
    perspective:
      levels:
        0.2: "Retroactive: Explains the 'Current' state. Tone is descriptive, reporting on the existing situation/medical history."
        0.5: "Mixed: Balances the explanation of the current state with some future-looking statements."
        0.8: "Proactive: Frames the content as a future roadmap or action plan. Tone is coaching and prescriptive."

orchestrator:
  max_retries: 10
  max_steps: 20
  clean_tags_from_final: true
  test_role: "patient" # Default role for main test
  eval_alignment_tolerance: 0.1

refiner:
  enabled: true # Set to false to fall back to hint-based mechanism
  # max_refine_attempts: 3 # Max consecutive refinement attempts before regenerating

rag:
  enabled: true
  embedding_model: "embeddinggemma" # Ollama embedding model
  top_k: 3 # Number of chunks to retrieve
  min_similarity: 0.4
  max_context_chars: 3000 # Cap for injected RAG context length
  max_context_chunks: 3 # Max number of chunks to include
  chromadb_path: "data/chromadb"
  kb_path: "data/kb"
  debug: false
