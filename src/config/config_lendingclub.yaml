seed: 42

data:
  csv_path: "data/raw/lendingclub.csv"  
  target: "y_not_paid"
  test_size: 0.2
  actionable_features: ['dti', 'revol_util', 'annual_inc', 'fico']

model:
 
  hidden_layers: [64, 32] 
  lr: 0.001
  epochs: 100
  batch_size: 64

xai:
  shap_background_samples: 100
  dice_method: "gradient"
  dice_total_cfs: 3
  dice_desired_class: 0   # 0 = "Paid" (Good), assuming y_not_paid=1 is Bad
  shap_relevance_threshold: 0.01
  

personas:
  applicant1: [0.2, 0.8, 0.8, 0.5]   #Easy, Action-oriented
  applicant2: [0.2, 0.8, 0.5, 0.8] # Easy, Cause-oriented
  officer1: [0.8, 0.2, 0.2, 0.8] # High Technicality, Cause-oriented
  officer2: [0.8, 0.2, 0.8, 0.2] # High Technicality, Action-oriented

cpm:
  learning_rate: 0.2

verifier:
  tolerances:
    default: 0.5
    impact: 0.005
    alignment: 0.35
  
  alias_map:
    ANNUAL_INC: ["INCOME", "SALARY", "EARNINGS", "YEARLY_PAY"]
    LOAN_AMNT: ["AMOUNT", "PRINCIPAL", "REQUESTED", "LOAN_SIZE"]
    DTI: ["DEBT_RATIO", "DEBT_TO_INCOME", "BURDEN"]
    FICO: ["SCORE", "CREDIT_SCORE", "RATING"]
    REVOL_UTIL: ["UTILIZATION", "CARD_USAGE", "LIMIT_USAGE"]
    
  llm_judge_model: "kimi-k2.5:cloud"

  verifier_rubric:
    technicality:
      levels:
        0.2: "Accessible: Uses plain language to explain financial concepts. DO NOT use ANY numbers, percentages, or dollar amounts. Must communicate direction of changes with verbs (e.g., increases, decreases, improves). Focus is on simple loan approval chances, avoiding complex banking jargon (e.g., no DTI, utilization rates). SHAP values not mentioned."
        0.5: "Balanced: Uses specific dollar amounts, percentages, and credit score ranges, but avoids heavy statistical breakdowns. May use standard financial terms (DTI, utilization) with brief explanations. SHAP values not mentioned."
        0.8: "Technical: Professional underwriter report style. Uses exact risk coefficients, specific credit terminology (debt-to-income ratio, revolving utilization, FICO score bands), and discusses precise statistical impacts (SHAP values should be mentioned)."
    verbosity:
      levels:
        0.2: "Telegraphic: Strictly uses bullet points. Very concise, short sentences, zero conversational filler."
        0.5: "Standard: Concise paragraphs or mixed formatting. Clear and direct."
        0.8: "Narrative: High fluency. Strictly NO bullet points. Continuous prose using transition words (e.g., 'Moreover', 'Consequently', 'In addition')."
    depth:
      levels:
        0.2: "Surface: Analyzes financial factors in isolation (one-by-one, e.g., 'Income is low', 'Debt is high'). Focuses on individual credit metric impacts without linking them together."
        0.5: "Intermediate: Acknowledges that multiple financial factors (e.g., Debt + Income, or Credit Score + Utilization) contribute to loan risk but lacks detailed interaction analysis."
        0.8: "Systemic: Deep analysis of credit interactions. Explains how financial factors work together (e.g., 'High DTI combined with low FICO creates compounding default risk') to drive the loan decision."
    perspective:
      levels:
        0.2: "Retroactive: Explains the 'Current' loan decision or rejection reasons. Tone is descriptive, reporting on the submitted application status and existing credit profile."
        0.5: "Mixed: Balances the explanation of the current credit profile with some forward-looking financial advice or improvement paths."
        0.8: "Proactive: Frames the content as a credit improvement roadmap or financial action plan. Tone is coaching and prescriptive (e.g., 'To get approved for your next loan, prioritize these financial changes')."

orchestrator:
  max_retries: 10
  max_steps: 20
  clean_tags_from_final: true
  test_role: "applicant" 
  eval_alignment_tolerance: 0.1

refiner:
  enabled: true  
  #max_refine_attempts: 3 

rag:
  enabled: true
  embedding_model: "embeddinggemma" # Ollama embedding model
  top_k: 3 # Number of chunks to retrieve
  min_similarity: 0.5
  max_context_chars: 3000 # Cap for injected RAG context length
  max_context_chunks: 3 # Max number of chunks to include
  chromadb_path: "data/chromadb"
  kb_path: "data/kb"
  debug: false